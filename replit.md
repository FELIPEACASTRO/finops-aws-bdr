# FinOps AWS - AWS Lambda Cost Optimization Solution

## Overview

FinOps AWS is an enterprise-grade serverless solution for intelligent AWS cost analysis, usage monitoring, and optimization recommendations across 253 AWS services. It functions as an AWS Lambda application, providing comprehensive financial analysis, operational monitoring, and optimization insights. The solution now includes an Automated Financial Consultant powered by Amazon Q Business for intelligent report generation.

## User Preferences

- Idioma de comunicação: Português do Brasil
- Perguntar antes de fazer suposições
- Seguir padrões Clean Architecture e DDD

## System Architecture

The system is built with Python 3.11, adhering to Clean Architecture and Domain-Driven Design (DDD) principles.

**Core Architecture:**
EventBridge → Step Functions → Lambda Workers (parallel) → S3
                    ↓
              Lambda Mapper → Lambda Aggregator → AI Consultant
                    ↓                                  ↓
                 SQS DLQ                        Amazon Q Business
                                                       ↓
                                              Email / Slack / Dashboard

**Key Architectural Components:**
- **Step Functions**: Orchestrates the execution flow, enabling parallel processing of AWS services.
- **Lambda Functions**:
    - `Lambda Mapper`: Divides the 253 AWS services into manageable batches.
    - `Lambda Worker`: Processes individual service batches in parallel.
    - `Lambda Aggregator`: Consolidates processed results and prepares reports.
    - `Q Report Handler`: Serves as the Lambda handler for the AI Consultant module.
- **AI Consultant**: Leverages Amazon Q Business to generate intelligent, personalized FinOps reports. It supports four personas (Executive, CTO, DevOps/SRE, FinOps Analyst) and delivers reports via email (SES), Slack, and a dashboard.
- **S3StateManager**: Manages the storage of state information and generated reports, utilizing S3 instead of DynamoDB.
- **ServiceFactory**: Manages the creation and caching of instances for the 253 AWS services.
- **ResilientExecutor**: Implements a circuit breaker pattern for enhanced fault tolerance.
- **RetryHandler**: Provides exponential backoff retry mechanisms.
- **Terraform**: The entire infrastructure, including Amazon Q Business resources, is defined and deployed using Terraform.

**UI/UX Decisions:**
- A modern web interface is provided via `dashboard.html`.
- Reports can be delivered through multiple channels: Email, Slack, and the Dashboard.

**Key Capabilities:**
- **Financial Analysis**: Multi-period cost analysis and trend detection.
- **Optimization**: Integration with AWS Compute Optimizer for right-sizing recommendations.
- **Multi-Account Support**: Integrates with AWS Organizations and Control Tower.
- **Security Analysis**: Integrates with Security Hub, Macie, and GuardDuty.
- **Scalability**: Designed for 100 executions/day with high reliability.
- **AI-Powered Reports**: Personalized executive reports generated by the AI Consultant using Amazon Q Business.

## External Dependencies

- **boto3**: AWS SDK for Python, used for interacting with AWS services.
- **pytest**: Python testing framework.
- **moto**: Library for mocking AWS services during testing.
- **tabulate**: Utility for pretty-printing tabular data.
- **Amazon Q Business**: Integrated for the AI Consultant module to generate intelligent reports.
- **AWS SES**: Used for sending email reports.
- **Slack webhooks**: Used for sending Slack notifications/reports.