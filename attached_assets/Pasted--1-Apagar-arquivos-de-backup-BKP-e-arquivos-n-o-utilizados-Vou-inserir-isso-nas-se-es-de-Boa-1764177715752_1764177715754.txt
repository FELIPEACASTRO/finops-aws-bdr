‚úÖ 1. Apagar arquivos de backup (BKP) e arquivos n√£o utilizados

Vou inserir isso nas se√ß√µes de:

Boas pr√°ticas

Limpeza e granularidade

Regras absolutas

Entreg√°veis

E dentro do Roadmap (governan√ßa e housekeeping)

Mas sem permitir que o Devin apague recursos da AWS, apenas arquivos internos da aplica√ß√£o (BKP, .tmp, caches, artefatos obsoletos).

‚úÖ 2. Criar uma forma de controlar a execu√ß√£o da task

Como:

O Lambda √†s vezes falha

Pode bater limites de API

Pode ser interrompido

Ent√£o vou adicionar uma se√ß√£o OBRIGAT√ìRIA sobre:

State Management / Execu√ß√£o incremental / Checkpoints

Idempot√™ncia

Persist√™ncia do progresso (S3, DynamoDB ou Step Functions)

Reprocessamento autom√°tico a partir do √∫ltimo ponto

Retry inteligente

Controlar ‚Äúonde parou‚Äù sem duplicar trabalho

Esse √© um dos maiores gaps em automa√ß√µes AWS ‚Äî j√° vai resolvido.

üöÄ A seguir est√° o PROMPT 3.2 ‚Äî ULTRA BLINDADO com as duas novas regras inclu√≠das (BKP + Controle de Execu√ß√£o)

Copie e cole no Devin.

PROMPT PARA DEVIN IA ‚Äì AUDITORIA EXTREMA + FINOPS + CONTROLE DE EXECU√á√ÉO + LIMPEZA DE BKP

(Vers√£o 3.2 ‚Äì Ultra Blindada)

Quero que voc√™ atue como Engenheiro de Software S√™nior + Arquiteto de Cloud AWS + Especialista em FinOps, com foco em auditoria de c√≥digo, efici√™ncia t√©cnica, confiabilidade operacional e transforma√ß√£o em produto de mercado.

1. Idioma da intera√ß√£o

Toda a comunica√ß√£o DEVE ser em Portugu√™s do Brasil.
Se algo estiver amb√≠guo, me pergunte ANTES de assumir.

2. Contexto

Tenho um Lambda escrito em Python que:

Analisa servi√ßos AWS

Usa um arquivo aws_services.json

Precisa evoluir para um produto FinOps seriamente robusto

Seu trabalho ser√°:

Analisar TODO o c√≥digo com rigor cir√∫rgico, linha a linha, arquivo por arquivo, e transformar isso em um produto robusto n√≠vel mercado.

3. Objetivo principal (FinOps ‚Äì Gasto vs Uso)

O Lambda deve analisar todos os servi√ßos do arquivo aws_services.json, coletar dados de:

CPU

Mem√≥ria

IOPS

Requests

Storage utilizado

Custo por recurso

Transfer√™ncia de dados

Recursos ociosos

E correlacionar tudo em um relat√≥rio FinOps.

NUNCA inventar dados quando uma m√©trica n√£o existir.
Documentar limita√ß√µes explicitamente.

4. Regras absolutas do processamento
O Lambda DEVE:

Ler os servi√ßos dinamicamente do aws_services.json

Tentar obter todas as m√©tricas poss√≠veis para cada servi√ßo

Documentar quando n√£o for poss√≠vel

Ser resiliente, idempotente e reexecut√°vel

Ter observabilidade completa

Ter limpeza interna de arquivos

O Lambda N√ÉO DEVE:

Apagar recursos reais da AWS

Alterar ambiente de produ√ß√£o

Criar sua pr√≥pria lista de servi√ßos

Gerar valores fict√≠cios

Criar arquivos tempor√°rios permanentes

5. (NOVIDADE) ‚Äì LIMPEZA AUTOM√ÅTICA DE ARQUIVOS BKP E ARTEFATOS N√ÉO UTILIZADOS

Voc√™ DEVE implementar / projetar:

Exclus√£o autom√°tica de:

Arquivos de BKP internos

Arquivos .tmp

Logs residuais

Cache antigo

Dumps obsoletos

Artefatos intermedi√°rios sem uso

A limpeza deve ocorrer:

Ao final de cada execu√ß√£o

De forma segura

Sem tocar recursos da AWS que n√£o sejam locais ao Lambda

E voc√™ deve:

Explicar onde, como e por que a limpeza ocorre

Garantir que o pacote da fun√ß√£o esteja sempre limpo, enxuto e atualizado

6. (NOVIDADE) ‚Äì CONTROLE DE EXECU√á√ÉO, CHECKPOINT E RECOME√áO DE ONDE PAROU

Esta √© uma parte cr√≠tica da sua miss√£o.

Voc√™ deve criar uma estrat√©gia completa e robusta para garantir que:

O Lambda seja capaz de:

Continuar de onde parou

Reprocessar apenas o que falta

Registrar progresso

Ser idempotente

Evitar duplica√ß√£o de chamadas

N√£o repetir custos desnecess√°rios

Tolerar falhas e limites de API

Voc√™ deve propor e documentar uma abordagem baseada em:
State Management (persist√™ncia de estado):

DynamoDB ou S3 para:

√öltimo servi√ßo processado

√öltimo recurso processado

Status parcial

Data/hora da √∫ltima execu√ß√£o

N√∫mero de tentativas

Retry inteligente:

Backoff exponencial

Retry apenas dos itens que falharam

Mecanismo de ‚Äúretentativa orientada por estado‚Äù

Execu√ß√£o incremental por lotes:

Processar servi√ßos em blocos

Retomar blocos pendentes

Evitar loops longos e timeouts

Idempot√™ncia completa:

Reexecutar sem corroper dados

Nunca duplicar registros

Nunca contabilizar custo/processamento duas vezes

Resili√™ncia real:

Trabalhar bem com limites de API

Ser seguro contra interrup√ß√µes e limites do Lambda

Voc√™ deve explicar com detalhes:

Como isso funciona

Como implementar

Como organizar o c√≥digo

Como seria armazenado

Como garantir consist√™ncia

7. Tagging ‚Äì obrigat√≥rio para an√°lises

Considerar tags como:

Environment

Application

Owner

CostCenter

Se faltar tag ‚Üí marcar como gap de governan√ßa.

8. Auditoria do c√≥digo (linha a linha)

Voc√™ DEVE analisar:

Todos os arquivos .py

Explicar tudo o que est√° acontecendo

Apontar problemas de:

Arquitetura

Design

Performance

Seguran√ßa

Estrutura

Camadas

Fun√ß√µes gigantes

Acoplamento

M√≥dulos misturados

Aus√™ncia de testes

E propor CORRE√á√ïES concretas, n√£o gen√©ricas.

9. Roadmap para virar Produto de Mercado (NOVIDADE REFOR√áADA)

Agora a parte principal:

FA√áA UM DOUBLE CHECK AINDA MAIS RIGOROSO E ME FA√áA UM ROADMAP EXTREMAMENTE DETALHADO DE TUDO QUE PRECISA SER FEITO PARA A SOLU√á√ÉO SE TORNAR UM PRODUTO DE MERCADO.
Gere um arquivo .md com esse roadmap.

O roadmap deve incluir 10 grandes fases, como:

Saneamento e arquitetura

Reestrutura√ß√£o do c√≥digo (camadas)

Coleta de m√©tricas de uso

Coleta de custos

Engine FinOps

Persist√™ncia e relat√≥rios

Observabilidade

Seguran√ßa

Testes e qualidade

Multi-regi√£o / multi-conta (evolu√ß√£o do produto)

E DEVE conter:

Subtarefas

Depend√™ncias

Requisitos

Riscos

Itens obrigat√≥rios

Crit√©rios de prontid√£o

Requisitos t√©cnicos

Estrutura do .md final

Voc√™ deve gerar:

O Roadmap no chat

Um arquivo .md contendo S√ì o Roadmap, bem formatado

10. Entreg√°veis finais do Devin

Voc√™ vai me entregar:

Auditoria completa do c√≥digo

Diagn√≥stico total dos gaps

Plano t√©cnico de APIs e coleta de m√©tricas

Proposta de arquitetura refatorada

Roadmap extremamente detalhado para virar produto de mercado

Arquivo .md com o Roadmap

Comunica√ß√£o 100% em portugu√™s